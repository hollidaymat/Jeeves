{
  "originalPath": "/home/jeeves/signal-cursor-controller/src/types/index.ts",
  "content": "/**\n * Signal Cursor Controller - Type Definitions\n */\n\n// ============================================================================\n// Message Types\n// ============================================================================\n\nexport interface IncomingMessage {\n  id: string;\n  sender: string;\n  content: string;\n  timestamp: Date;\n  interface: 'signal' | 'web' | 'mock' | 'voice';\n  attachments?: Attachment[];\n}\n\nexport interface Attachment {\n  type: 'image' | 'audio' | 'file';\n  path?: string;           // File path (for Signal attachments)\n  data?: string;           // Base64 data (for web uploads)\n  name?: string;           // Original filename\n  mimeType: string;\n}\n\nexport interface OutgoingMessage {\n  recipient: string;\n  content: string;\n  replyTo?: string;\n  attachments?: string[];  // File paths on disk to send as attachments\n}\n\n// ============================================================================\n// Intent Parsing\n// ============================================================================\n\nexport type ActionType = \n  | 'open_project'\n  | 'open_file'\n  | 'goto_line'\n  | 'status'\n  | 'help'\n  | 'list_projects'\n  | 'agent_start'\n  | 'agent_ask'\n  | 'agent_stop'\n  | 'agent_status'\n  | 'read_file'\n  | 'edit_file'\n  | 'apply_changes'\n  | 'reject_changes'\n  | 'show_diff'\n  | 'terminal_run'      // Run a terminal command\n  | 'terminal_npm'      // npm commands (install, run, etc)\n  | 'terminal_git'      // git commands (status, pull, etc)\n  | 'terminal_stop'     // Stop running terminal process\n  | 'memory_history'    // Show conversation history\n  | 'memory_clear'      // Clear conversation history\n  | 'memory_summary'    // Show project summary\n  | 'set_preference'    // Set a user preference\n  | 'prd_submit'        // Submit a PRD for execution\n  | 'prd_approve'       // Approve execution plan\n  | 'prd_pause'         // Pause PRD execution\n  | 'prd_resume'        // Resume PRD execution\n  | 'prd_status'        // Check PRD execution status\n  | 'prd_abort'         // Abort PRD execution\n  | 'trust_status'      // Show current trust level\n  | 'trust_upgrade'     // Request trust upgrade\n  | 'trust_history'     // Show trust history\n  | 'show_learned'      // Show learned preferences\n  | 'remember'          // Save a personality preference\n  | 'set_role'          // Set Jeeves' role/identity\n  | 'add_trait'         // Add a personality trait\n  | 'browse'            // Navigate to a URL and get content\n  | 'screenshot'        // Take a screenshot of a page\n  | 'browser_click'     // Click an element on the page\n  | 'browser_type'      // Type text into an element\n  | 'browser_close'     // Close the browser\n  | 'dev_start'         // Start dev server\n  | 'dev_stop'          // Stop dev server\n  | 'dev_preview'       // Open dev server in browser\n  | 'dev_status'        // Get dev server status\n  | 'api_get'           // API test: GET request\n  | 'api_post'          // API test: POST request\n  | 'api_put'           // API test: PUT request\n  | 'api_patch'         // API test: PATCH request\n  | 'api_delete'        // API test: DELETE request\n  | 'api_history'       // API test: show request history\n  | 'execute_plan'      // Execute pending plan\n  | 'set_model'         // Set model (haiku/sonnet/opus/auto)\n  | 'list_backups'      // List available backups for a file\n  | 'restore_backup'    // Restore a file from backup\n  | 'show_cost'         // Show cost/budget information\n  | 'show_builds'       // Show build history\n  | 'show_lessons'      // Show lessons learned\n  | 'compact_session'   // Compact/summarize long conversation history\n  | 'create_project'    // Create a new project\n  | 'autonomous_build'  // Autonomous build from PRD\n  | 'agent_build'       // Build with agent\n  | 'apply_last'        // Apply last suggested changes\n  // Homelab actions\n  | 'homelab_status'          // Full system status\n  | 'homelab_system_review'   // Review system (stacks, VPN, etc.) and store findings to memory\n  | 'homelab_containers'      // List containers\n  | 'homelab_resources'       // CPU/RAM/disk usage\n  | 'homelab_temps'           // CPU temperature\n  | 'homelab_service_start'   // Start a service\n  | 'homelab_service_stop'    // Stop a service\n  | 'homelab_service_restart' // Restart a service\n  | 'homelab_logs'            // Get service logs\n  | 'homelab_update'          // Update a service\n  | 'homelab_update_all'      // Update all services\n  | 'homelab_install'         // Install a service\n  | 'homelab_uninstall'       // Uninstall a service\n  | 'homelab_diagnose'        // Run diagnostics on a service\n  | 'homelab_stacks'          // List docker compose stacks\n  | 'homelab_health'          // Run health checks\n  | 'homelab_self_test'       // Run homelab self-test\n  | 'jeeves_self_test'        // Run full Jeeves cognitive/functional test suite\n  | 'homelab_security_status' // Security overview\n  | 'homelab_report'          // Report: connected, needs setup, needs API\n  | 'homelab_firewall'        // Firewall management\n  // Backup commands\n  | 'homelab_backup'          // Run a backup (full/postgres/volumes)\n  | 'homelab_backup_status'   // Show backup health and last backup info\n  | 'homelab_backup_list'     // List available backups\n  | 'homelab_backup_restore'  // Restore a volume or postgres from backup\n  | 'homelab_backup_schedule' // Install/check systemd timer\n  // Media commands\n  | 'media_search'            // Search for movies/shows\n  | 'media_download'          // Download/add media to library\n  | 'media_download_from_image' // Extract list from image and download\n  | 'media_select'            // Select from pending media results (by number)\n  | 'media_more'              // Show next page of media results\n  | 'media_status'            // Check download queue status\n  | 'music_indexer_status'    // Lidarr/Prowlarr categories and music indexer status\n  | 'qbittorrent_status'      // qBittorrent torrent list and transfer stats\n  | 'qbittorrent_add'         // Add torrent via magnet or URL\n  | 'deploy_gluetun_stack'   // Copy Gluetun+qBittorrent stack to /opt/stacks and deploy (never overwrites .env)\n  | 'feedback'              // User is giving feedback/preference, not requesting action\n  // Cursor Background Agent commands\n  | 'cursor_launch'          // Launch a Cursor agent for a coding task\n  | 'cursor_status'          // Check active Cursor tasks\n  | 'cursor_followup'        // Send follow-up to active Cursor agent\n  | 'cursor_stop'            // Stop a running Cursor agent\n  | 'cursor_conversation'    // View Cursor agent conversation\n  | 'cursor_confirm'         // Confirm pending Cursor task (\"go\", \"yes\")\n  | 'cursor_repos'           // List available repos\n  // Development (autonomous dev loop)\n  | 'dev_task'               // Run a development task (implement/fix/add)\n  | 'dev_recent'             // Recent development changes (last 5)\n  | 'dev_rollback'           // Rollback last change\n  | 'dev_changelog'          // Full changelog (last 20)\n  // Vercel commands\n  | 'vercel_url'             // Look up project URL\n  | 'vercel_deploy'          // Trigger deployment\n  | 'vercel_projects'        // List all Vercel projects\n  // System monitoring\n  | 'disk_health'            // SMART disk monitoring\n  | 'docker_cleanup'         // Prune unused Docker resources\n  | 'log_errors'             // Scan container logs for errors\n  | 'pihole_stats'           // Pi-hole DNS blocking stats\n  | 'speed_test'             // Network speed test\n  | 'image_updates'          // Check for container image updates\n  | 'ssl_check'              // SSL/TLS certificate expiry check\n  | 'service_deps'           // Service dependency mapping\n  // Integrations\n  | 'home_assistant'         // Home Assistant control\n  | 'tailscale_status'       // VPN/Tailscale status\n  | 'nextcloud_status'       // Nextcloud storage info\n  | 'nextcloud_upload'       // Upload file to Nextcloud\n  | 'grafana_dashboards'     // List Grafana dashboards\n  | 'grafana_snapshot'       // Render Grafana panel to image\n  | 'uptime_kuma'            // Uptime Kuma monitor status\n  | 'bandwidth'              // Per-container bandwidth stats\n  // Productivity\n  | 'note_add'               // Save a quick note\n  | 'note_search'            // Search notes\n  | 'note_list'              // List all notes\n  | 'reminder_set'           // Set a reminder\n  | 'reminder_list'          // List pending reminders\n  | 'schedule_create'        // Create custom scheduled task\n  | 'schedule_list'          // List custom schedules\n  | 'schedule_delete'        // Delete a custom schedule\n  | 'timeline'               // System event timeline\n  | 'quiet_hours'            // Quiet hours settings\n  | 'quiet_hours_set'        // Set quiet hours window\n  | 'file_share'             // Send a file via Signal\n  | 'mute_notifications'     // Mute security/alert notifications until time\n  | 'security_acknowledge'   // Acknowledge security alert\n  | 'unknown'\n  | 'denied';\n\n// ============================================================================\n// Terminal Commands\n// ============================================================================\n\nexport interface TerminalCommand {\n  type: 'npm' | 'git' | 'custom';\n  command: string;\n  args: string[];\n  workingDir: string;\n}\n\nexport interface TerminalResult {\n  success: boolean;\n  output: string;\n  error?: string;\n  exitCode: number | null;\n  timedOut: boolean;\n  truncated: boolean;\n  duration_ms: number;\n}\n\n// Image attachment (web: base64 data; Signal: path)\nexport interface ImageAttachment {\n  name?: string;\n  data?: string; // base64 data URL (web)\n  path?: string; // file path (Signal)\n  mimeType?: string;\n}\n\nexport interface ParsedIntent {\n  action: ActionType;\n  target?: string;\n  resolved_path?: string;\n  command?: string;\n  line?: number;\n  prompt?: string;  // For agent commands\n  terminal_command?: TerminalCommand;  // For terminal actions\n  confidence: number;\n  message?: string;\n  raw_response?: string;\n  requiresAsync?: boolean;  // Action needs async handling\n  data?: Record<string, unknown>;  // Additional data for the action\n  attachments?: ImageAttachment[];  // Image attachments from web interface\n  assembledContext?: string;  // Brain 2 context for agent_ask/code_review (injected into prompt)\n  // Token optimization tracking\n  resolutionMethod?: 'pattern' | 'llm' | 'registry';  // How intent was resolved\n  estimatedCost?: number;  // Estimated cost in dollars (0 for pattern-matched)\n}\n\n// ============================================================================\n// Command Execution\n// ============================================================================\n\nexport interface ExecutionResult {\n  success: boolean;\n  output?: string;\n  error?: string;\n  duration_ms: number;\n  attachments?: string[];  // File paths to send as attachments (screenshots, exports, etc.)\n  /** When set, executor calls agent with this prompt; agent response may yield a file path to send */\n  delegateToAgent?: string;\n}\n\n// ============================================================================\n// Project Scanner\n// ============================================================================\n\nexport interface Project {\n  name: string;\n  path: string;\n  type: 'node' | 'rust' | 'go' | 'python' | 'unknown';\n  last_modified: Date;\n}\n\nexport interface ProjectIndex {\n  projects: Map<string, Project>;\n  scanned_at: Date;\n}\n\n// ============================================================================\n// Configuration\n// ============================================================================\n\nexport interface Config {\n  signal: {\n    number: string;\n    socket: string;\n  };\n  security: {\n    allowed_numbers: string[];\n    log_unauthorized: boolean;\n    silent_deny: boolean;\n  };\n  claude: {\n    model: string;\n    haiku_model: string;\n    max_tokens: number;\n  };\n  projects: {\n    directories: string[];\n    scan_depth: number;\n    markers: string[];\n    exclude: string[];\n  };\n  commands: {\n    cursor: string;\n  };\n  terminal: {\n    timeout_ms: number;\n    max_output_lines: number;\n    max_output_chars: number;\n    allowed_npm_scripts: string[];\n    allowed_git_commands: string[];\n    custom_commands: Record<string, string>;\n  };\n  memory: {\n    enabled: boolean;\n    max_conversations_per_project: number;\n    max_messages_per_conversation: number;\n    storage_path: string;\n    auto_summarize: boolean;\n  };\n  prd: {\n    enabled: boolean;\n    triggers: string[];\n    auto_approve: boolean;\n    checkpoint_frequency: 'per-phase' | 'hourly' | 'on-decision' | 'none';\n    auto_commit: boolean;\n    branch_strategy: 'feature-branch' | 'direct' | 'none';\n    pause_timeout_minutes: number;\n  };\n  trust: {\n    enabled: boolean;\n    initial_level: TrustLevelNumber;\n    successful_tasks_required: number;\n    rollbacks_allowed: number;\n    time_at_level_minimum_days: number;\n    monthly_spend_limit: number;\n    per_task_spend_limit: number;\n  };\n  server: {\n    host: string;\n    port: number;\n    /** TLS key and cert file paths for HTTPS. When set, server uses https.createServer. */\n    tls?: { keyPath: string; certPath: string };\n  };\n  rate_limits: {\n    messages_per_minute: number;\n    messages_per_hour: number;\n    messages_per_day: number;\n  };\n  safety: {\n    backupEnabled: boolean;\n    backupRetentionHours: number;\n    maxShrinkagePercent: number;\n    validateContent: boolean;\n    atomicWrites: boolean;\n    gitAutoStash: boolean;\n  };\n  homelab: HomelabConfig;\n  budgets: BudgetConfig;\n  voice?: {\n    enabled: boolean;\n    piperUrl: string;\n    piperVoice?: string;\n    whisperUrl: string;\n    wakeModelPath: string;\n  };\n}\n\n// ============================================================================\n// Budget / Cost Enforcement\n// ============================================================================\n\nexport interface FeatureBudget {\n  /** Max tokens per LLM call for this feature */\n  maxTokens: number;\n  /** Max LLM calls per period (0 = unlimited) */\n  maxCallsPerPeriod: number;\n  /** Period in ms for maxCallsPerPeriod (3600000 = 1hr, 86400000 = 1day) */\n  periodMs: number;\n  /** Daily dollar cap for this feature (0 = unlimited) */\n  dailyCap: number;\n}\n\nexport interface BudgetConfig {\n  /** Global daily hard cap in dollars — all LLM features stop when hit */\n  dailyHardCap: number;\n  /** Hourly soft cap — throttle to Haiku-only when exceeded */\n  hourlySoftCap: number;\n  /** Circuit breaker: consecutive LLM failures before pausing */\n  circuitBreakerThreshold: number;\n  /** Circuit breaker: pause duration in ms */\n  circuitBreakerPauseMs: number;\n  /** Per-feature budgets */\n  features: Record<string, FeatureBudget>;\n}\n\n// ============================================================================\n// Logging\n// ============================================================================\n\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\nexport interface LogEntry {\n  timestamp: string;\n  level: LogLevel;\n  message: string;\n  data?: Record<string, unknown>;\n}\n\n// ============================================================================\n// Web UI / WebSocket\n// ============================================================================\n\nexport interface WSMessage {\n  type: 'command' | 'status' | 'log' | 'projects' | 'response' | 'agent_status' | 'pending_changes' | 'prd_status' | 'prd_checkpoint' | 'stream_start' | 'stream_chunk' | 'stream_end' | 'homelab_status' | 'cost_update' | 'activity_update' | 'project_update' | 'service_detail' | 'task:started' | 'task:progress' | 'task:completed' | 'task:failed' | 'queue:updated' | 'cursor:task:started' | 'cursor:task:progress' | 'cursor:task:completed' | 'cursor:task:stuck' | 'cursor:task:error' | 'self_test_started' | 'self_test_progress' | 'self_test_complete';\n  payload: unknown;\n}\n\nexport interface AgentStatus {\n  active: boolean;\n  workingDir?: string;\n  uptime?: number;\n  contextSize?: number;\n  pendingChanges?: number;\n}\n\nexport interface SystemStatus {\n  uptime_seconds: number;\n  interfaces: {\n    signal: 'connected' | 'disconnected' | 'unavailable';\n    web: 'connected' | 'disconnected';\n  };\n  projects_loaded: number;\n  messages_today: number;\n  last_command?: {\n    action: string;\n    timestamp: string;\n    success: boolean;\n  };\n  agent?: AgentStatus;\n  /** Voice interface (hold-to-talk in web UI). Present when config.voice.enabled. */\n  voice?: { enabled: boolean };\n}\n\n// ============================================================================\n// Memory & Context\n// ============================================================================\n\nexport interface ConversationMessage {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: string;\n  filesDiscussed?: string[];  // Files mentioned in this message\n}\n\nexport interface ProjectMemory {\n  projectPath: string;\n  projectName: string;\n  conversations: ConversationMessage[];\n  lastAccessed: string;\n  filesDiscussed: string[];  // All files ever discussed\n  summary?: string;  // AI-generated summary of work done\n}\n\nexport interface UserPreferences {\n  defaultProject?: string;\n  preferredModel?: string;\n  verboseMode?: boolean;\n  autoApplyChanges?: boolean;\n}\n\nexport interface MemoryStore {\n  version: number;\n  preferences: UserPreferences;\n  projects: Record<string, ProjectMemory>;  // keyed by project path\n  generalConversations: ConversationMessage[];  // non-project conversations\n  lastUpdated: string;\n}\n\n// ============================================================================\n// PRD Execution (Phase 5)\n// ============================================================================\n\nexport type PrdPhaseStatus = 'pending' | 'planning' | 'awaiting_approval' | 'executing' | 'paused' | 'completed' | 'failed';\n\nexport interface PrdPhase {\n  id: string;\n  name: string;\n  description: string;\n  estimatedDuration: string;  // e.g., \"30min\", \"1hr\"\n  decisions?: string[];       // Technical decisions made (what was chosen)\n  decisionPoints?: string[];  // Legacy: Questions (deprecated, use decisions)\n  status: PrdPhaseStatus;\n  startedAt?: string;\n  completedAt?: string;\n  result?: string;\n  filesCreated?: string[];\n  filesModified?: string[];\n}\n\nexport interface ExecutionPlan {\n  id: string;\n  prdContent: string;         // Original PRD text\n  projectPath: string;\n  projectName: string;\n  phases: PrdPhase[];\n  totalEstimate: string;      // e.g., \"4 hours\"\n  confidence: number;         // 0-100\n  constraints: string[];      // User-specified constraints\n  createdAt: string;\n  approvedAt?: string;\n  completedAt?: string;\n  status: 'planning' | 'awaiting_approval' | 'executing' | 'paused' | 'completed' | 'failed';\n  currentPhaseIndex: number;\n  deviations: PrdDeviation[];\n  branchName?: string;\n  _consecutiveFailures?: number;   // Tracks consecutive phase failures for circuit breaking\n}\n\nexport interface PrdDeviation {\n  phase: string;\n  prdSaid: string;\n  actualDid: string;\n  reasoning: string;\n  timestamp: string;\n}\n\nexport interface PrdCheckpoint {\n  phaseId: string;\n  phaseName: string;\n  message: string;\n  decisions: string[];\n  filesChanged: string[];\n  timestamp: string;\n  requiresResponse: boolean;\n}\n\nexport interface PrdModeConfig {\n  enabled: boolean;\n  triggers: string[];\n  autoApprove: boolean;       // Skip plan approval step\n  checkpointFrequency: 'per-phase' | 'hourly' | 'on-decision';\n  autoCommit: boolean;\n  branchStrategy: 'feature-branch' | 'direct' | 'none';\n  pauseTimeoutMinutes: number; // How long to wait before auto-continuing\n}\n\n// ============================================================================\n// Trust System (Phase 6)\n// ============================================================================\n\nexport type TrustLevelNumber = 1 | 2 | 3 | 4 | 5;\n\nexport interface TrustLevelPermissions {\n  name: 'supervised' | 'semi-autonomous' | 'trusted' | 'autonomous' | 'full-trust';\n  canCommit: boolean;\n  canSpend: boolean | { max: number };\n  canContact: boolean | { draftsOnly?: boolean; preApprovedTemplates?: boolean };\n  checkpointFrequency: 'every-change' | 'per-phase' | 'per-task' | 'on-completion';\n  requiresApproval: string[];\n}\n\nexport interface TrustHistoryEntry {\n  date: string;\n  level: TrustLevelNumber;\n  reason: string;\n  taskId?: string;\n}\n\nexport interface TaskRecord {\n  id: string;\n  type: 'prd' | 'edit' | 'terminal' | 'other';\n  description: string;\n  startedAt: string;\n  completedAt?: string;\n  success: boolean;\n  rollback: boolean;\n  spendAmount?: number;\n  corrections: number;  // Number of user corrections during task\n}\n\nexport interface TrustState {\n  currentLevel: TrustLevelNumber;\n  history: TrustHistoryEntry[];\n  taskHistory: TaskRecord[];\n  successfulTasksAtLevel: number;\n  daysAtLevel: number;\n  levelStartDate: string;\n  totalSpend: number;\n  totalSpendLimit: number;\n}\n\nexport interface LearnedPreferences {\n  codeStyle: {\n    prefersFunctionalComponents?: boolean;\n    prefersNamedExports?: boolean;\n    errorHandlingPattern?: string;\n    preferredLibraries?: Record<string, boolean>;\n    projectStructure?: string;\n    testingApproach?: string;\n    confidence: number;\n  };\n  communication: {\n    prefersConcisenessOver?: 'thoroughness' | 'detail';\n    checkpointFrequency?: 'per-phase' | 'per-task' | 'on-completion';\n    wantsExplanationsFor?: string[];\n    doesNotWantExplanationsFor?: string[];\n    confidence: number;\n  };\n  decisions: {\n    whenUncertain?: 'ask' | 'decide' | 'conservative';\n    deviationThreshold?: 'low' | 'medium' | 'high';\n    autonomousSpendingLimit?: number;\n    confidence: number;\n  };\n  personality: {\n    role?: string;  // e.g., \"AI employee, not assistant\"\n    traits: string[];  // e.g., [\"direct\", \"professional\", \"proactive\"]\n    rememberStatements: string[];  // Explicit things user told Jeeves to remember\n    dontDoStatements: string[];  // Things user said NOT to do\n    confidence: number;\n  };\n  corrections: CorrectionRecord[];\n}\n\nexport interface CorrectionRecord {\n  timestamp: string;\n  original: string;\n  corrected: string;\n  category: 'code-style' | 'library' | 'approach' | 'communication' | 'other';\n  learned: string;  // What was learned from this correction\n}\n\nexport interface TrustConfig {\n  enabled: boolean;\n  initialLevel: TrustLevelNumber;\n  successfulTasksRequired: number;\n  rollbacksAllowed: number;\n  timeAtLevelMinimumDays: number;\n  monthlySpendLimit: number;\n  perTaskSpendLimit: number;\n}\n\n// ============================================================================\n// Handler\n// ============================================================================\n\nexport interface MessageInterface {\n  name: string;\n  start(): Promise<void>;\n  stop(): Promise<void>;\n  send(message: OutgoingMessage): Promise<void>;\n  onMessage(handler: (message: IncomingMessage) => Promise<void>): void;\n}\n\n// ============================================================================\n// Browser Automation (Web Browsing)\n// ============================================================================\n\nexport type BrowserActionType = \n  | 'navigate'\n  | 'screenshot'\n  | 'get_content'\n  | 'click'\n  | 'type'\n  | 'scroll'\n  | 'wait';\n\nexport interface BrowserAction {\n  type: BrowserActionType;\n  url?: string;\n  selector?: string;\n  text?: string;\n  waitMs?: number;\n  options?: BrowserActionOptions;\n}\n\nexport interface BrowserActionOptions {\n  waitForNavigation?: boolean;\n  fullPage?: boolean;  // For screenshots\n  extractStyles?: boolean;\n  maxContentLength?: number;\n}\n\nexport interface BrowserResult {\n  success: boolean;\n  action: BrowserActionType;\n  url?: string;\n  title?: string;\n  content?: string;  // Sanitized text/markdown content\n  screenshotPath?: string;\n  screenshotBase64?: string;\n  error?: string;\n  securityWarnings?: string[];\n  actionLog?: BrowserActionLogEntry[];\n}\n\nexport interface BrowserActionLogEntry {\n  timestamp: string;\n  action: BrowserActionType;\n  target?: string;  // URL or selector\n  result: 'success' | 'failed' | 'blocked';\n  reason?: string;\n}\n\nexport interface BrowserSecurityConfig {\n  allowedDomains?: string[];  // Whitelist for interactive actions\n  blockedDomains?: string[];  // Blacklist\n  maxContentLength: number;\n  stripScripts: boolean;\n  stripStyles: boolean;\n  stripComments: boolean;\n  detectInjection: boolean;\n  incognito: boolean;\n  blockDownloads: boolean;\n  blockPopups: boolean;\n}\n\nexport interface InjectionPattern {\n  pattern: RegExp;\n  severity: 'low' | 'medium' | 'high';\n  description: string;\n}\n\n// ============================================================================\n// Homelab Types\n// ============================================================================\n\nexport type ServiceTier = 'core' | 'media' | 'services' | 'databases' | 'monitoring';\nexport type ServicePriority = 'critical' | 'high' | 'medium' | 'low';\nexport type ServiceState = 'running' | 'stopped' | 'error' | 'unknown' | 'restarting';\n\nexport interface ServiceDefinition {\n  name: string;\n  tier: ServiceTier;\n  image: string;\n  ports: number[];\n  ram: string;                   // e.g., '256MB'\n  purpose: string;\n  priority: ServicePriority;\n  depends: string[];\n  type?: 'container' | 'system-service';\n  devices?: string[];            // e.g., ['/dev/dri:/dev/dri']\n  networkMode?: string;          // e.g., 'host'\n  healthEndpoint?: string;       // HTTP health check URL\n  healthPort?: number;           // TCP health check port\n}\n\nexport interface ServiceStatus {\n  name: string;\n  state: ServiceState;\n  uptime?: string;\n  cpu?: string;\n  memory?: string;\n  memoryLimit?: string;\n  restarts?: number;\n  lastError?: string;\n}\n\nexport interface ContainerInfo {\n  id: string;\n  name: string;\n  image: string;\n  state: ServiceState;\n  status: string;               // Docker's status string (e.g., \"Up 3 hours\")\n  ports: string[];\n  created: string;\n  health?: string;              // healthy | unhealthy | starting | none\n}\n\nexport interface ContainerStats {\n  name: string;\n  cpuPercent: string;\n  memUsage: string;\n  memLimit: string;\n  memPercent: string;\n  netIO: string;\n  blockIO: string;\n}\n\nexport interface SystemResourceStatus {\n  cpu: {\n    usagePercent: number;\n    loadAverage: [number, number, number];   // 1m, 5m, 15m\n    cores: number;\n  };\n  ram: {\n    totalMB: number;\n    usedMB: number;\n    freeMB: number;\n    availableMB: number;\n    usagePercent: number;\n  };\n  disk: {\n    filesystem: string;\n    totalGB: number;\n    usedGB: number;\n    availableGB: number;\n    usagePercent: number;\n    mountPoint: string;\n  }[];\n  temperature: {\n    celsius: number;\n    status: 'normal' | 'warning' | 'critical';\n  } | null;\n  network?: {\n    interface: string;\n    rxBytes: number;\n    txBytes: number;\n  }[];\n}\n\nexport interface HomelabThresholds {\n  cpu: { warning: number; critical: number };\n  ram: { warning: number; critical: number };\n  disk: { warning: number; critical: number };\n  temp: { warning: number; critical: number };\n}\n\nexport interface ThresholdAlert {\n  metric: 'cpu' | 'ram' | 'disk' | 'temp';\n  level: 'warning' | 'critical';\n  value: number;\n  threshold: number;\n  message: string;\n}\n\nexport interface HealthCheckResult {\n  service: string;\n  healthy: boolean;\n  checks: {\n    type: 'http' | 'tcp' | 'docker' | 'command';\n    target: string;\n    passed: boolean;\n    responseTime?: number;\n    error?: string;\n  }[];\n  timestamp: string;\n}\n\nexport interface StackInfo {\n  name: string;\n  path: string;\n  services: string[];\n  running: boolean;\n}\n\nexport interface ShellCommandResult {\n  success: boolean;\n  stdout: string;\n  stderr: string;\n  exitCode: number | null;\n  timedOut: boolean;\n  duration_ms: number;\n  command: string;\n}\n\nexport interface HomelabConfig {\n  enabled: boolean;\n  stacksDir: string;\n  configsDir: string;\n  backupsDir: string;\n  dataDir: string;\n  maxRamMB: number;\n  monitorInterval: number;\n  thresholds: HomelabThresholds;\n}\n\n// ============================================================================\n// Homelab Dashboard API Types\n// ============================================================================\n\nexport interface HomelabDashboardStatus {\n  enabled: boolean;\n  resources: {\n    cpu: { usagePercent: number; cores: number; loadAverage: number[] };\n    ram: { totalMB: number; usedMB: number; usagePercent: number };\n    disk: { mountPoint: string; totalGB: number; usedGB: number; usagePercent: number }[];\n    temperature: { celsius: number; status: 'normal' | 'warning' | 'critical' } | null;\n  } | null;\n  services: HomelabServiceStatus[];\n  health: {\n    healthy: number;\n    unhealthy: number;\n    unknown: number;\n    total: number;\n  };\n  security: {\n    firewallActive: boolean;\n    sshHardened: boolean;\n    certsValid: number;\n    certsExpiring: number;\n    lastAuditCommand: string | null;\n  } | null;\n  alerts: string[];\n  timestamp: string;\n}\n\nexport interface HomelabServiceStatus {\n  name: string;\n  tier: ServiceTier;\n  priority: ServicePriority;\n  state: ServiceState;\n  image: string;\n  ramMB: number;\n  ports: number[];\n  purpose: string;\n  uptime?: string;\n  cpuPercent?: string;\n  memUsage?: string;\n  healthy?: boolean;\n}\n",
  "timestamp": "2026-02-14T17:10:19.587Z",
  "taskId": "dev-1771089002224",
  "description": "Add UUID utility type exports to types file"
}